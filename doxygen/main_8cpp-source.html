<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MDuel DS: C:/DevKitPro/!MDuel/source/main.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>C:/DevKitPro/!MDuel/source/main.cpp</h1><a href="main_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Marshmallow Duel DS v2</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright © 2007 Sam Pospischil http://pospi.spadgos.com</span>
<a name="l00004"></a>00004 <span class="comment"> * </span>
<a name="l00005"></a>00005 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00007"></a>00007 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00008"></a>00008 <span class="comment"> * (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"> * </span>
<a name="l00010"></a>00010 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<a name="l00013"></a>00013 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"> * </span>
<a name="l00015"></a>00015 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment">// Includes</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;PA9.h&gt;</span>       <span class="comment">// Include for PA_Lib</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;dswifi9.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00025"></a>00025         <span class="keyword">using</span> std::vector;
<a name="l00026"></a>00026         <span class="keyword">using</span> std::string;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include "<a class="code" href="macros_8h.html">macros.h</a>"</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include "<a class="code" href="sprite_manager_8h.html">spriteManager.h</a>"</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include "<a class="code" href="game_manager_8h.html">gameManager.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "<a class="code" href="menu_title_8h.html">menuTitle.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="menu_bottom_8h.html">menuBottom.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="menu_g_bottom_8h.html">menuGBottom.h</a>"</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="comment">//graphics</span>
<a name="l00036"></a>00036 <span class="preprocessor">#ifndef _ALLGRAPHICS_</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#define _ALLGRAPHICS_</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#include "../data/all_gfx_ed.c"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#endif</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="comment">//sounds</span>
<a name="l00041"></a>00041 <span class="preprocessor">#ifdef __WITHSOUND</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#include "boomflyF.h"</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include "bootsF.h"</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include "BulletReflect.h"</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include "dunceF.h"</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include "HookHit.h"</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include "invisibleF.h"</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include "lazerF.h"</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include "lightningarmedF.h"</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include "lightninghitF.h"</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include "magnetF.h"</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include "mineDrop.h"</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include "mineExp.h"</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include "net.h"</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include "paraCloseF.h"</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include "paraOpenF.h"</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include "gotPickup.h"</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include "skull.h"</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include "skullPickup.h"</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include "splashBig.h"</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include "splashSmall.h"</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include "teleF.h"</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include "thrown.h"</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include "visableF.h"</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include "WeasAttack2.h"</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include "WeasAttackF.h"</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include "WeasRelease1.h"</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include "WeasRelease2.h"</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include "WeasRun1.h"</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include "WeasRun2.h"</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include "WeasRun3.h"</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include "platformExplode.h"</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include "spawnPuff.h"</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include "menuMove.h"</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include "menuOk.h"</span>
<a name="l00076"></a>00076 <span class="preprocessor">#include "menuCancel.h"</span>
<a name="l00077"></a>00077 <span class="comment">/*#ifdef __WITHMENUTRACK</span>
<a name="l00078"></a>00078 <span class="comment">        #include "opening.h"</span>
<a name="l00079"></a>00079 <span class="comment">#endif*/</span>
<a name="l00080"></a>00080 <span class="preprocessor">#endif</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 <span class="comment">//end asset loading</span>
<a name="l00083"></a>00083 <span class="comment">//start actual program</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">//==============================================================================================</span>
<a name="l00086"></a>00086 <span class="comment">//==============================================================================================</span>
<a name="l00087"></a>00087 <span class="comment">//HERE IS SOME AWESOME DEBUGGING WHICH IS REALLY NOT MUCH USE TO ME. MAYBE SOME OTHER TIME.</span>
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="comment">/*#ifdef __MDDEBUG</span>
<a name="l00090"></a>00090 <span class="comment">        </span>
<a name="l00091"></a>00091 <span class="comment">        #include &lt;list&gt;</span>
<a name="l00092"></a>00092 <span class="comment">        #include &lt;iterator&gt;</span>
<a name="l00093"></a>00093 <span class="comment">        </span>
<a name="l00094"></a>00094 <span class="comment">        typedef struct {</span>
<a name="l00095"></a>00095 <span class="comment">                int     address;</span>
<a name="l00096"></a>00096 <span class="comment">                int     size;</span>
<a name="l00097"></a>00097 <span class="comment">                char file[64];</span>
<a name="l00098"></a>00098 <span class="comment">                int     line;</span>
<a name="l00099"></a>00099 <span class="comment">        } ALLOC_INFO;</span>
<a name="l00100"></a>00100 <span class="comment"></span>
<a name="l00101"></a>00101 <span class="comment">        typedef list&lt;ALLOC_INFO*&gt; AllocList;</span>
<a name="l00102"></a>00102 <span class="comment">        </span>
<a name="l00103"></a>00103 <span class="comment">        AllocList *allocList;</span>
<a name="l00104"></a>00104 <span class="comment">        </span>
<a name="l00105"></a>00105 <span class="comment">        void AddTrack(int addr,  int asize,  const char *fname, int lnum)</span>
<a name="l00106"></a>00106 <span class="comment">        {</span>
<a name="l00107"></a>00107 <span class="comment">                ALLOC_INFO *info;</span>
<a name="l00108"></a>00108 <span class="comment">                </span>
<a name="l00109"></a>00109 <span class="comment">                if(!allocList) {</span>
<a name="l00110"></a>00110 <span class="comment">                        allocList = new(AllocList);</span>
<a name="l00111"></a>00111 <span class="comment">                }</span>
<a name="l00112"></a>00112 <span class="comment">                </span>
<a name="l00113"></a>00113 <span class="comment">                info = new(ALLOC_INFO);</span>
<a name="l00114"></a>00114 <span class="comment">                info-&gt;address = addr;</span>
<a name="l00115"></a>00115 <span class="comment">                strncpy(info-&gt;file, fname, 63);</span>
<a name="l00116"></a>00116 <span class="comment">                info-&gt;line = lnum;</span>
<a name="l00117"></a>00117 <span class="comment">                info-&gt;size = asize;</span>
<a name="l00118"></a>00118 <span class="comment">                allocList-&gt;insert(allocList-&gt;begin(), info);</span>
<a name="l00119"></a>00119 <span class="comment">        };</span>
<a name="l00120"></a>00120 <span class="comment">        </span>
<a name="l00121"></a>00121 <span class="comment">        void RemoveTrack(int addr)</span>
<a name="l00122"></a>00122 <span class="comment">        {</span>
<a name="l00123"></a>00123 <span class="comment">                AllocList::iterator i;</span>
<a name="l00124"></a>00124 <span class="comment">                </span>
<a name="l00125"></a>00125 <span class="comment">                if(!allocList)</span>
<a name="l00126"></a>00126 <span class="comment">                        return;</span>
<a name="l00127"></a>00127 <span class="comment">                for(i = allocList-&gt;begin(); i != allocList-&gt;end(); i++)</span>
<a name="l00128"></a>00128 <span class="comment">                {</span>
<a name="l00129"></a>00129 <span class="comment">                        if((*i)-&gt;address == addr)</span>
<a name="l00130"></a>00130 <span class="comment">                        {</span>
<a name="l00131"></a>00131 <span class="comment">                                allocList-&gt;remove((*i));</span>
<a name="l00132"></a>00132 <span class="comment">                                break;</span>
<a name="l00133"></a>00133 <span class="comment">                        }</span>
<a name="l00134"></a>00134 <span class="comment">                }</span>
<a name="l00135"></a>00135 <span class="comment">        };</span>
<a name="l00136"></a>00136 <span class="comment">        </span>
<a name="l00137"></a>00137 <span class="comment">        void DumpUnfreed()</span>
<a name="l00138"></a>00138 <span class="comment">        {</span>
<a name="l00139"></a>00139 <span class="comment">                AllocList::iterator i;</span>
<a name="l00140"></a>00140 <span class="comment">                int totalSize = 0;</span>
<a name="l00141"></a>00141 <span class="comment">                string buf;</span>
<a name="l00142"></a>00142 <span class="comment">                </span>
<a name="l00143"></a>00143 <span class="comment">                if(!allocList)</span>
<a name="l00144"></a>00144 <span class="comment">                  return;</span>
<a name="l00145"></a>00145 <span class="comment">                </span>
<a name="l00146"></a>00146 <span class="comment">                for(i = allocList-&gt;begin(); i != allocList-&gt;end(); i++) {</span>
<a name="l00147"></a>00147 <span class="comment">                        char temp[256];</span>
<a name="l00148"></a>00148 <span class="comment">                        sprintf(temp, "%-50s: LINE %d, ADDRESS %d, %d unfreed\n",</span>
<a name="l00149"></a>00149 <span class="comment">                          (*i)-&gt;file, (*i)-&gt;line, (*i)-&gt;address, (*i)-&gt;size);</span>
<a name="l00150"></a>00150 <span class="comment">                        buf += temp;</span>
<a name="l00151"></a>00151 <span class="comment">                        totalSize += (*i)-&gt;size;</span>
<a name="l00152"></a>00152 <span class="comment">                }</span>
<a name="l00153"></a>00153 <span class="comment">                //sprintf(buf, "-----------------------------------------------------------\n");</span>
<a name="l00154"></a>00154 <span class="comment">                //PA_OutputText(0, 0, 0, buf);</span>
<a name="l00155"></a>00155 <span class="comment">                //sprintf(buf, "Total Unfreed: %d bytes\n", totalSize);</span>
<a name="l00156"></a>00156 <span class="comment">                </span>
<a name="l00157"></a>00157 <span class="comment">                PA_OutputText(0, 0, 0, const_cast&lt;char *&gt;(buf.c_str()));</span>
<a name="l00158"></a>00158 <span class="comment">        };</span>
<a name="l00159"></a>00159 <span class="comment">        </span>
<a name="l00160"></a>00160 <span class="comment">        inline void * operator new(unsigned int size, const char *file, int line)</span>
<a name="l00161"></a>00161 <span class="comment">        {</span>
<a name="l00162"></a>00162 <span class="comment">          void *ptr = (void *)malloc(size);</span>
<a name="l00163"></a>00163 <span class="comment">          AddTrack((int)ptr, size, file, line);</span>
<a name="l00164"></a>00164 <span class="comment">          return(ptr);</span>
<a name="l00165"></a>00165 <span class="comment">        };</span>
<a name="l00166"></a>00166 <span class="comment">        inline void operator delete(void *p)</span>
<a name="l00167"></a>00167 <span class="comment">        {</span>
<a name="l00168"></a>00168 <span class="comment">          RemoveTrack((int)p);</span>
<a name="l00169"></a>00169 <span class="comment">          free(p);</span>
<a name="l00170"></a>00170 <span class="comment">        };</span>
<a name="l00171"></a>00171 <span class="comment">        </span>
<a name="l00172"></a>00172 <span class="comment">        #define DEBUG_NEW new(__FILE__, __LINE__)</span>
<a name="l00173"></a>00173 <span class="comment">        #define new DEBUG_NEW</span>
<a name="l00174"></a>00174 <span class="comment">#endif*/</span>
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="comment">//==============================================================================================</span>
<a name="l00177"></a>00177 <span class="comment">//==============================================================================================</span>
<a name="l00178"></a>00178 
<a name="l00179"></a><a class="code" href="main_8cpp.html#3c04138a5bfe5d72780bb7e82a18e627">00179</a> <span class="keywordtype">int</span> <a class="code" href="main_8cpp.html#3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv)
<a name="l00180"></a>00180 {
<a name="l00181"></a>00181         PA_Init();      <span class="comment">// Initializes PA_Lib</span>
<a name="l00182"></a>00182         PA_InitRand();  <span class="comment">// random numbers are go!</span>
<a name="l00183"></a>00183 <span class="preprocessor">        #ifdef __WITHSOUND</span>
<a name="l00184"></a>00184 <span class="preprocessor"></span>        PA_InitSound(); <span class="comment">// sounds!</span>
<a name="l00185"></a>00185 <span class="preprocessor">        #endif</span>
<a name="l00186"></a>00186 <span class="preprocessor"></span>        PA_InitVBL();   <span class="comment">// Initializes a standard VBL</span>
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="preprocessor">        #ifdef __MDDEBUG</span>
<a name="l00189"></a>00189 <span class="preprocessor"></span>        PA_WaitForVBL();  PA_WaitForVBL();  PA_WaitForVBL();  <span class="comment">// wait a few VBLs</span>
<a name="l00190"></a>00190         fatInitDefault();  <span class="comment">// FAT driver init</span>
<a name="l00191"></a>00191         FILE* logFile = fopen(LOGFILE, <span class="stringliteral">"a+"</span>);
<a name="l00192"></a>00192         <span class="keywordflow">if</span> (logFile)
<a name="l00193"></a>00193                 fprintf(logFile, <span class="stringliteral">"\n\n\n\n=========================================\nNEW GAME!\n\n\n\n"</span>);
<a name="l00194"></a>00194         fclose(logFile);
<a name="l00195"></a>00195 <span class="preprocessor">        #endif</span>
<a name="l00196"></a>00196 <span class="preprocessor"></span>        
<a name="l00197"></a>00197         <span class="comment">//start timer system. We get roughly 1,100 hours of play before the timer overflows. Should be alright :P</span>
<a name="l00198"></a>00198         StartTime(<span class="keyword">true</span>);
<a name="l00199"></a>00199         
<a name="l00200"></a>00200         PA_InitCustomText(0, 2, Font);  <span class="comment">//initialise text subsystems</span>
<a name="l00201"></a>00201         PA_InitCustomText(1, 2, Font);
<a name="l00202"></a>00202         
<a name="l00203"></a>00203         <span class="comment">//sprite managers</span>
<a name="l00204"></a>00204         <a class="code" href="classgame_manager.html">gameManager</a> *gm = <span class="keyword">new</span> <a class="code" href="classgame_manager.html">gameManager</a>(1);
<a name="l00205"></a>00205         <a class="code" href="classmenu_title.html">menuTitle</a> *menuTop = <span class="keyword">new</span> <a class="code" href="classmenu_title.html">menuTitle</a>(1);
<a name="l00206"></a>00206         <a class="code" href="classmenu_bottom.html">menuBottom</a> *menuBase = <span class="keyword">new</span> <a class="code" href="classmenu_bottom.html">menuBottom</a>(0);
<a name="l00207"></a>00207         <a class="code" href="classmenu_g_bottom.html">menuGBottom</a> *gameBase = <span class="keyword">new</span> <a class="code" href="classmenu_g_bottom.html">menuGBottom</a>(0);
<a name="l00208"></a>00208         
<a name="l00209"></a>00209         gm-&gt;<a class="code" href="classgame_manager.html#26e15c789c61c4857d3ae1d6ca787637">statTimerID</a> = NewTimer(<span class="keyword">true</span>);               <span class="comment">//timer for stats recording</span>
<a name="l00210"></a>00210         
<a name="l00211"></a>00211         gm-&gt;<a class="code" href="classgame_manager.html#81e708f6531f9cb5e680dc5d4dfe4ada">loadEnvSpriteSet</a>(envSprites_Pal, envSprites_Sprite);
<a name="l00212"></a>00212         gm-&gt;<a class="code" href="classgame_manager.html#345dc72813157d0353182f70292b8e68">loadPickupSpriteSet</a>(pickupSprites_Pal, pickupSprites_Sprite);
<a name="l00213"></a>00213         gm-&gt;<a class="code" href="classgame_manager.html#81d67fe315a2ec4c0516a08b48e3ef6e">loadFXSpriteSet</a>(effectSprites_Pal, effectSprites_Sprite);
<a name="l00214"></a>00214         gm-&gt;<a class="code" href="classgame_manager.html#e0428869ae0548737f43941e259e9e40">loadDunceSpriteSet</a>(dunceHatSprite_Pal, dunceHatSprite_Sprite);
<a name="l00215"></a>00215         gm-&gt;<a class="code" href="classgame_manager.html#1a2ff9068ba48100b94c13c650c2905f">loadBootsSpriteSet</a>(bootsSprite_Pal, bootsSprite_Sprite);
<a name="l00216"></a>00216         
<a name="l00217"></a>00217         gm-&gt;<a class="code" href="classgame_manager.html#f7e94a662af08043be2b5e2d8a07de50">player1000VPalleteData</a> = player1000V_Pal;
<a name="l00218"></a>00218         
<a name="l00219"></a>00219         menuBase-&gt;<a class="code" href="classmenu_bottom.html#7905ea3ac525845a3cff4a2db71540b6">loadCursorSpriteSet</a>(menuCursors_Pal, menuCursors_Sprite);
<a name="l00220"></a>00220         menuBase-&gt;<a class="code" href="classmenu_bottom.html#f76c804a2b402705b19dc4901bfe48e5">loadPickupSpriteSet</a>(pickupSprites_Pal, pickupSprites_Sprite);
<a name="l00221"></a>00221         menuBase-&gt;<a class="code" href="classmenu_bottom.html#9430baac69b8f095c320243515e913a7">loadMenuSpriteSet</a>(menuSprites_Pal, menuSprites_Sprite);
<a name="l00222"></a>00222         menuBase-&gt;<a class="code" href="classmenu_bottom.html#1f628dc120701f1a12a3bc144fde6510">playerPallete1</a> = playerSprite1_Pal;
<a name="l00223"></a>00223         menuBase-&gt;<a class="code" href="classmenu_bottom.html#23d0e0677061345b2f1972a246350f67">playerPallete2</a> = playerSprite3_Pal;
<a name="l00224"></a>00224         menuBase-&gt;<a class="code" href="classmenu_bottom.html#494b7d42b95dd56f85d87953283a8e36">playerPallete3</a> = playerSprite2_Pal;
<a name="l00225"></a>00225         menuBase-&gt;<a class="code" href="classmenu_bottom.html#4a2b4067aedf2cbc7fca6a3caa7f06e6">playerPallete4</a> = playerSprite4_Pal;
<a name="l00226"></a>00226         menuBase-&gt;<a class="code" href="classmenu_bottom.html#a2f1b0169cdb236d9514e86e251dab89">playerSprite1</a> = playerSprite1_Sprite;
<a name="l00227"></a>00227         menuBase-&gt;<a class="code" href="classmenu_bottom.html#b661e57747aa8fc4a6237138e40fa19c">playerSprite2</a> = playerSprite2_Sprite;
<a name="l00228"></a>00228         menuBase-&gt;<a class="code" href="classmenu_bottom.html#53481b334a23d5f5eb36243fa71eafa1">playerSprite3</a> = playerSprite3_Sprite;
<a name="l00229"></a>00229         
<a name="l00230"></a>00230         gameBase-&gt;<a class="code" href="classmenu_g_bottom.html#6b3e6a166150940e37ff74f7dda67f91">loadMenuSpriteSet</a>(menuSprites_Pal, menuSprites_Sprite);
<a name="l00231"></a>00231         gameBase-&gt;<a class="code" href="classmenu_g_bottom.html#634123f35b5f30d639530a679bfe50de">loadSpawnerSpriteSet</a>(spawnerSpriteX_Pal, spawnerSpriteX_Sprite);
<a name="l00232"></a>00232         gameBase-&gt;<a class="code" href="classmenu_g_bottom.html#5674721ab537b18ac729b1b865aedaf4">loadPickupSpriteSet</a>(pickupSprites_Pal, pickupSprites_Sprite);
<a name="l00233"></a>00233         
<a name="l00234"></a>00234 <span class="preprocessor">        #ifdef __WITHSOUND</span>
<a name="l00235"></a>00235 <span class="preprocessor"></span>        <span class="comment">/*#ifdef __WITHMENUTRACK</span>
<a name="l00236"></a>00236 <span class="comment">        menuBase-&gt;loadSound(&amp;menuBase-&gt;titleMusic, opening, opening_size);</span>
<a name="l00237"></a>00237 <span class="comment">        #endif*/</span>
<a name="l00238"></a>00238         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#f681ab9c826c86c91f0e9dceab1f514e">bigSplash</a>, splashBig, splashBig_size);
<a name="l00239"></a>00239         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#c39ba8f99dd04bf63d9c3136c6602af7">smallSplash</a>, splashSmall, splashSmall_size);
<a name="l00240"></a>00240         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#5c68624c40f1342585503b4c504a73fe">platformExplode</a>, platformExplode, platformExplode_size);
<a name="l00241"></a>00241         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#4330bcf6b5edb5d70535eede5b2e6e3e">spawnPuff</a>, spawnPuff, spawnPuff_size);
<a name="l00242"></a>00242         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#332400a1e29460b0085f5a530d5e6a67">gotPickup</a>, gotPickup, gotPickup_size);
<a name="l00243"></a>00243         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#0b5a18207a98163ced32fcd7de857b99">teleport</a>, teleF, teleF_size);
<a name="l00244"></a>00244         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#8af19eb016a1cbcf78a2958d9f86bb1a">skullLoop</a>, skull, skull_size);
<a name="l00245"></a>00245         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#43033864549f374c75a9ee14f7376b4e">skullPickup</a>, skullPickup, skullPickup_size);
<a name="l00246"></a>00246         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#04438f1cd43ede84cadc88b266514cf7">lightningHit</a>, lightninghitF, lightninghitF_size);
<a name="l00247"></a>00247         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#c5feecc22bdc86312f2c922396984229">lightningLoop</a>, lightningarmedF, lightningarmedF_size);
<a name="l00248"></a>00248         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#2f00cd4d2980fbe250b2d7fe6a7cc5d9">invisOn</a>, invisibleF, invisibleF_size);
<a name="l00249"></a>00249         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#f81cf98baeae330c0e2a5f87f20a4500">invisOff</a>, visableF, visableF_size);
<a name="l00250"></a>00250         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#affe63c63aba81a163d89b87a8d92c5c">mineExp</a>, mineExp, mineExp_size);
<a name="l00251"></a>00251         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#fa2c20912f0142b502aa7bbce2354670">mineDrop</a>, mineDrop, mineDrop_size);
<a name="l00252"></a>00252         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#bc529c6103ca56de277de905b40baf18">gunFire</a>, lazerF, lazerF_size);
<a name="l00253"></a>00253         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#6b44904860d55155fd2bf17ab068436f">bootsJump</a>, bootsF, bootsF_size);
<a name="l00254"></a>00254         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#57add9ec53060149d574a4044d82aa88">chutClose</a>, paraCloseF, paraCloseF_size);
<a name="l00255"></a>00255         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#09a50a36ff885c2eece33b03fde82346">chutOpen</a>, paraOpenF, paraOpenF_size);
<a name="l00256"></a>00256         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#5f95e8a16fdfaaad3bc63dee2af22863">hookHit</a>, HookHit, HookHit_size);
<a name="l00257"></a>00257         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#2ed3366f784c5ea17133ed5ab7be5717">duncePickup</a>, dunceF, dunceF_size);
<a name="l00258"></a>00258         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#8d0fb1f3c1d089e068c4b610704f101a">magnetLoop</a>, magnetF, magnetF_size);
<a name="l00259"></a>00259         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#5a2e7a08b55d23c05a047d1ee0609373">netThrow</a>, net, net_size);
<a name="l00260"></a>00260         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#1968367c1ccd061552ff8cf388de409a">bulletReflect</a>, BulletReflect, BulletReflect_size);
<a name="l00261"></a>00261         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#0de20c063934932613bdda8623b82841">boomerangLoop</a>, boomflyF, boomflyF_size);
<a name="l00262"></a>00262         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#1eced65776bc92a302d07c18da56f45b">throwSound</a>, thrown, thrown_size);
<a name="l00263"></a>00263         
<a name="l00264"></a>00264         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#860d1f3b009bbd5f0088f0688a592ac3">weaselSounds</a>[0], WeasAttack2, WeasAttack2_size);
<a name="l00265"></a>00265         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#860d1f3b009bbd5f0088f0688a592ac3">weaselSounds</a>[1], WeasAttackF, WeasAttackF_size);
<a name="l00266"></a>00266         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#860d1f3b009bbd5f0088f0688a592ac3">weaselSounds</a>[2], WeasRelease1, WeasRelease1_size);
<a name="l00267"></a>00267         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#860d1f3b009bbd5f0088f0688a592ac3">weaselSounds</a>[3], WeasRelease2, WeasRelease2_size);
<a name="l00268"></a>00268         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#860d1f3b009bbd5f0088f0688a592ac3">weaselSounds</a>[4], WeasRun1, WeasRun1_size);
<a name="l00269"></a>00269         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#860d1f3b009bbd5f0088f0688a592ac3">weaselSounds</a>[5], WeasRun2, WeasRun2_size);
<a name="l00270"></a>00270         gm-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;gm-&gt;<a class="code" href="classgame_manager.html#860d1f3b009bbd5f0088f0688a592ac3">weaselSounds</a>[6], WeasRun3, WeasRun3_size);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272         menuBase-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;menuBase-&gt;<a class="code" href="classmenu_bottom.html#95b374bdf170a291a7c5006484c62b77">menuMove</a>, menuMove, menuMove_size);
<a name="l00273"></a>00273         menuBase-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;menuBase-&gt;<a class="code" href="classmenu_bottom.html#a80c788b6cc60b6283a31f527c59fb88">menuOk</a>, menuOk, menuOk_size);
<a name="l00274"></a>00274         menuBase-&gt;<a class="code" href="classsprite_manager.html#d87ca373d1641158b2c56670b8a6223a">loadSound</a>(&amp;menuBase-&gt;<a class="code" href="classmenu_bottom.html#a1452c970935561fe526639ac822352d">menuCancel</a>, menuCancel, menuCancel_size);
<a name="l00275"></a>00275 <span class="preprocessor">        #endif</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span>        
<a name="l00277"></a>00277         <span class="comment">//spriteManager associations</span>
<a name="l00278"></a>00278         menuBase-&gt;<a class="code" href="classmenu_bottom.html#9b93866a616c35c9a2592b21b4ed47f7">menuTop</a> = menuTop;
<a name="l00279"></a>00279         menuBase-&gt;<a class="code" href="classmenu_bottom.html#901c66924c1d1afdfed595b99a21a7d0">gameTop</a> = gm;
<a name="l00280"></a>00280         menuBase-&gt;<a class="code" href="classmenu_bottom.html#5d2cd21b4d0e367e1240c73db2678868">gameBottom</a> = gameBase;
<a name="l00281"></a>00281         
<a name="l00282"></a>00282         gameBase-&gt;<a class="code" href="classmenu_g_bottom.html#592e026dc4edfe36f795c4fd43a6b032">menuTop</a> = menuTop;
<a name="l00283"></a>00283         gameBase-&gt;<a class="code" href="classmenu_g_bottom.html#9846aa66c83086481906d8c9b799c55f">menuBase</a> = menuBase;
<a name="l00284"></a>00284         gameBase-&gt;<a class="code" href="classmenu_g_bottom.html#3f8c750ade154b1e49e8489d694213f8">gameTop</a> = gm;
<a name="l00285"></a>00285         
<a name="l00286"></a>00286         gm-&gt;<a class="code" href="classgame_manager.html#34fdce780dba351e2cc779abc89fae4a">menuTop</a> = menuTop;
<a name="l00287"></a>00287         gm-&gt;<a class="code" href="classgame_manager.html#b62e346d2be3e17bb90aaf58d519b5a2">menuBase</a> = menuBase;
<a name="l00288"></a>00288         gm-&gt;<a class="code" href="classgame_manager.html#63f941f1586bf45ad0b3416ac864a92b">gameBottom</a> = gameBase;
<a name="l00289"></a>00289         
<a name="l00290"></a>00290         <span class="comment">//ok - turn on the spriteManagers we want to use now.</span>
<a name="l00291"></a>00291         menuTop-&gt;<a class="code" href="classmenu_title.html#4b8e8f785c2e0b3a28878904341a3a32">activate</a>();
<a name="l00292"></a>00292         menuBase-&gt;<a class="code" href="classmenu_bottom.html#5f155cbf7cbf200152aac0a3115fb037">activate</a>();
<a name="l00293"></a>00293         
<a name="l00294"></a>00294         <span class="comment">// Unfortunately try/catch blocks don't seem to work on the DS. Boo!</span>
<a name="l00295"></a>00295         <span class="comment">//try {</span>
<a name="l00296"></a>00296                 <span class="keywordflow">while</span> (1)
<a name="l00297"></a>00297                 {
<a name="l00298"></a>00298                         <span class="keywordflow">if</span> (menuTop-&gt;<a class="code" href="classsprite_manager.html#c04f3b2fc8af8cf6397612fb57ef558b">isActive</a>())
<a name="l00299"></a>00299                                 menuTop-&gt;<a class="code" href="classmenu_title.html#52e37a67b0d9a7c2a41f706df7622ab9">gameTick</a>();
<a name="l00300"></a>00300                         <span class="keywordflow">if</span> (menuBase-&gt;<a class="code" href="classsprite_manager.html#c04f3b2fc8af8cf6397612fb57ef558b">isActive</a>())
<a name="l00301"></a>00301                                 menuBase-&gt;<a class="code" href="classmenu_bottom.html#e07f84fad17e528abf9a4b46e994475c">gameTick</a>();
<a name="l00302"></a>00302                         <span class="keywordflow">if</span> (gm-&gt;<a class="code" href="classsprite_manager.html#c04f3b2fc8af8cf6397612fb57ef558b">isActive</a>())
<a name="l00303"></a>00303                                 gm-&gt;<a class="code" href="classgame_manager.html#9c8b14c07ef44178368a70e0de73462e">gameTick</a>();
<a name="l00304"></a>00304                         <span class="keywordflow">if</span> (gameBase-&gt;<a class="code" href="classsprite_manager.html#c04f3b2fc8af8cf6397612fb57ef558b">isActive</a>())
<a name="l00305"></a>00305                                 gameBase-&gt;<a class="code" href="classmenu_g_bottom.html#3d92b1010e875ddd522a0da5b7d6ce3e">gameTick</a>();
<a name="l00306"></a>00306                         
<a name="l00307"></a>00307                         PA_CheckLid();  <span class="comment">//check for lid pausing</span>
<a name="l00308"></a>00308                         PA_WaitForVBL();
<a name="l00309"></a>00309                 } 
<a name="l00310"></a>00310         <span class="comment">/*} catch (...) {</span>
<a name="l00311"></a>00311 <span class="comment">                DumpUnfreed();</span>
<a name="l00312"></a>00312 <span class="comment">        }*/</span>
<a name="l00313"></a>00313         
<a name="l00314"></a>00314         <span class="keywordflow">return</span> 0;
<a name="l00315"></a>00315 }
<a name="l00316"></a>00316 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Mar 13 23:27:52 2007 for MDuel DS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
