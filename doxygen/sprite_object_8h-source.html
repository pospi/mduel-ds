<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MDuel DS: C:/DevKitPro/!MDuel/source/spriteObject.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>C:/DevKitPro/!MDuel/source/spriteObject.h</h1><a href="sprite_object_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Marshmallow Duel DS v2</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright © 2007 Sam Pospischil http://pospi.spadgos.com</span>
<a name="l00004"></a>00004 <span class="comment"> * </span>
<a name="l00005"></a>00005 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00007"></a>00007 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00008"></a>00008 <span class="comment"> * (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"> * </span>
<a name="l00010"></a>00010 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<a name="l00013"></a>00013 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"> * </span>
<a name="l00015"></a>00015 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef _SPRITEOBJECT_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define _SPRITEOBJECT_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;PA9.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00027"></a>00027         <span class="keyword">using namespace </span>std;
<a name="l00028"></a>00028 <span class="preprocessor">#include "<a class="code" href="macros_8h.html">macros.h</a>"</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include "<a class="code" href="sprite_manager_8h.html">spriteManager.h</a>"</span>
<a name="l00030"></a>00030 
<a name="l00056"></a><a class="code" href="classsprite_object.html">00056</a> <span class="keyword">class </span><a class="code" href="classsprite_object.html">spriteObject</a>
<a name="l00057"></a>00057 {
<a name="l00058"></a>00058         <span class="keyword">public</span>:
<a name="l00059"></a>00059                 <a class="code" href="classsprite_object.html#8c84c9d6ff19a554e490fe55bf1d1382">spriteObject</a>(<a class="code" href="classsprite_manager.html">spriteManager</a>* newsm);
<a name="l00060"></a>00060                 <span class="keyword">virtual</span> <a class="code" href="classsprite_object.html#8de7b380bc3373fbbc075fe888719f62">~spriteObject</a>();
<a name="l00061"></a>00061 
<a name="l00062"></a>00062                 <a class="code" href="classsprite_object.html#8c84c9d6ff19a554e490fe55bf1d1382">spriteObject</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a> &amp;s);
<a name="l00063"></a>00063                 
<a name="l00064"></a>00064                 <span class="comment">/* </span>
<a name="l00065"></a>00065 <span class="comment">                        upon initialising, ensure you set the following:</span>
<a name="l00066"></a>00066 <span class="comment">                                pallete, sprite, center, bounds, position, collision</span>
<a name="l00067"></a>00067 <span class="comment">                        optionally set the following (order is important, do the above first!):</span>
<a name="l00068"></a>00068 <span class="comment">                                layer, flipped, animation / frame, speed, sound channel</span>
<a name="l00069"></a>00069 <span class="comment">                        </span>
<a name="l00070"></a>00070 <span class="comment">                        movement vars (x, y, vx, vy, accel etc) are in fixed point format (256 = 1 pixel).</span>
<a name="l00071"></a>00071 <span class="comment">                        all others (bounds, center etc) are in pixel values.</span>
<a name="l00072"></a>00072 <span class="comment">                        All inputs to this class are pixel values, the conversion should be maintained internally.</span>
<a name="l00073"></a>00073 <span class="comment">                */</span>
<a name="l00074"></a>00074                 
<a name="l00079"></a><a class="code" href="classsprite_object.html#37e58e733109aa1beeb3edb1062e69b3">00079</a>                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#37e58e733109aa1beeb3edb1062e69b3">setPallete</a>(u8 <span class="keywordtype">id</span>)
<a name="l00080"></a>00080                 {
<a name="l00081"></a>00081                         <a class="code" href="classsprite_object.html#9c6b610f1930f17cac27c9cddb358ee7">palleteID</a> = id;
<a name="l00082"></a>00082 <span class="preprocessor">                        #ifdef __MDDEBUG</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>                        <span class="keywordtype">char</span> buffer[255];
<a name="l00084"></a>00084                         sprintf(buffer, <span class="stringliteral">"pallete set (#%d)"</span>, <a class="code" href="classsprite_object.html#9c6b610f1930f17cac27c9cddb358ee7">palleteID</a>);
<a name="l00085"></a>00085                         macros::debugMessage(className, buffer);
<a name="l00086"></a>00086 <span class="preprocessor">                        #endif</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>                }
<a name="l00088"></a>00088                 
<a name="l00089"></a>00089                 <span class="comment">//only works for GFX created sprites becase we need a GFX id</span>
<a name="l00090"></a>00090                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#c0e984d302bf576ce0e0566f6d6f982f">updatePallete</a>(s8 newPalID, u8 sizex, u8 sizey, u8 colorMode = 1);
<a name="l00091"></a>00091                 
<a name="l00092"></a><a class="code" href="classsprite_object.html#d31c667bbba5f9cdc7a432d160e75d03">00092</a>                 s8 <a class="code" href="classsprite_object.html#d31c667bbba5f9cdc7a432d160e75d03">getPalleteID</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#9c6b610f1930f17cac27c9cddb358ee7">palleteID</a>;}
<a name="l00093"></a><a class="code" href="classsprite_object.html#5b7652fbbb7a0f8449bc3bd2655d1b97">00093</a>                 s8 <a class="code" href="classsprite_object.html#5b7652fbbb7a0f8449bc3bd2655d1b97">getSpriteID</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">spriteID</a>;}
<a name="l00094"></a><a class="code" href="classsprite_object.html#5ba9a49407d561228b842b7996025351">00094</a>                 u8 <a class="code" href="classsprite_object.html#5ba9a49407d561228b842b7996025351">getFrame</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#3d250c9ad97a81b5dbeef79991eea9e7">frame</a>;}
<a name="l00095"></a>00095                 
<a name="l00105"></a><a class="code" href="classsprite_object.html#0388fbbde841447d3e7f5359e9d50cae">00105</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#0388fbbde841447d3e7f5359e9d50cae">setBounds</a>(s8 t, s8 r, s8 b, s8 l) {<a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#1563a414613f0030971b29299d6b1368">t</a> = t; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a4e0d680f7176f2dad96a37924f5c064">r</a> = r; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a1dbea5f6f72467e85e5ed5c6c045905">b</a> = b; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#106a34a1d3ea500cd683ad326f02c5b8">l</a> = l;}
<a name="l00110"></a><a class="code" href="classsprite_object.html#66963368f9a601d005eb23ee35511026">00110</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#0388fbbde841447d3e7f5359e9d50cae">setBounds</a>(s8 arr[4]) {<a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#1563a414613f0030971b29299d6b1368">t</a> = arr[0]; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a4e0d680f7176f2dad96a37924f5c064">r</a> = arr[1]; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a1dbea5f6f72467e85e5ed5c6c045905">b</a> = arr[2]; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#106a34a1d3ea500cd683ad326f02c5b8">l</a> = arr[3];}
<a name="l00111"></a><a class="code" href="classsprite_object.html#6c661796ebd0b3a64f00c9b6303cf80c">00111</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#6c661796ebd0b3a64f00c9b6303cf80c">setCenter</a>(u8 <a class="code" href="classsprite_object.html#d32183242a6b4215f28535d42f7b9c3d">x</a>, u8 <a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a>) {<a class="code" href="classsprite_object.html#8a42d1e5ef00fb1968eda24bbc5e05d5">centerx</a> = x; <a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">centery</a> = y;}
<a name="l00118"></a><a class="code" href="classsprite_object.html#0a72a65deb03776522535ceaca8f843b">00118</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#0a72a65deb03776522535ceaca8f843b">setLayer</a>(u8 newLayer) {<a class="code" href="classsprite_object.html#7ede5b5fe4d3fbe94be0ed62727951f2">UPDATEDlayer</a> = <span class="keyword">true</span>; <a class="code" href="classsprite_object.html#ad650a239c91615dbd0b4eee02be5ac5">layer</a> = newLayer;}
<a name="l00119"></a>00119                 
<a name="l00120"></a>00120                 <span class="comment">//'give' makes a new sprite from some data</span>
<a name="l00121"></a>00121                 <span class="comment">//@pre: palleteID has been set</span>
<a name="l00122"></a>00122                 s8 <a class="code" href="classsprite_object.html#cc40da98b5fc5fd55f12abd9ad7b7ca7">giveSprite</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* spriteData, u8 sizex, u8 sizey, u8 cx = 16, u8 cy = 16, u8 minIndex = 0, s16 nx = 0, s16 ny = 0, u8 colorMode = 1);
<a name="l00123"></a>00123                 s8 <a class="code" href="classsprite_object.html#0ae90648ee90d2a1681ab10b45dc38e2">givePallete</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>* palleteData);
<a name="l00124"></a>00124                 s8 <a class="code" href="classsprite_object.html#3fedeb454aa5973df6cd5f6b0862710b">giveGFX</a>(u16 GFXid, u8 sizex, u8 sizey, u8 cx = 16, u8 cy = 16, u8 minIndex = 0, s16 nx = 0, s16 ny = 0, u8 colorMode = 1);
<a name="l00125"></a>00125                 
<a name="l00126"></a>00126                 <span class="comment">//hide an object's visuals without actually deleting it</span>
<a name="l00127"></a>00127                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#f2f4e4a3fdae1930c9fb68c5108de29a">deleteSprite</a>();
<a name="l00128"></a>00128                 
<a name="l00129"></a>00129                 <span class="comment">//work out whether this object has gfx associated with it</span>
<a name="l00130"></a>00130                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#8270490df60feb41abefba30e0a4f298">hasGraphics</a>() <span class="keyword">const</span>;
<a name="l00131"></a>00131                 
<a name="l00132"></a>00132                 <span class="comment">//basic animation</span>
<a name="l00133"></a><a class="code" href="classsprite_object.html#68a7fdfe600c71658d1a192b2685c7b0">00133</a>                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#68a7fdfe600c71658d1a192b2685c7b0">setPos</a>(s16 nx, s16 ny) {<a class="code" href="classsprite_object.html#d32183242a6b4215f28535d42f7b9c3d">x</a> = (nx-<a class="code" href="classsprite_object.html#8a42d1e5ef00fb1968eda24bbc5e05d5">centerx</a>)&lt;&lt;8; <a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a> = (ny-<a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">centery</a>)&lt;&lt;8;}
<a name="l00140"></a><a class="code" href="classsprite_object.html#8b2ded482630043f4566fe711b093226">00140</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#8b2ded482630043f4566fe711b093226">setBasePos</a>(s16 ny) {<a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a> = (ny-<a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">centery</a>-<a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a1dbea5f6f72467e85e5ed5c6c045905">b</a>)&lt;&lt;8;}
<a name="l00141"></a>00141                 
<a name="l00142"></a><a class="code" href="classsprite_object.html#75bff6b123952663cca745982393f4b5">00142</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#75bff6b123952663cca745982393f4b5">setSpeed</a>(<span class="keywordtype">float</span> nvx, <span class="keywordtype">float</span> nvy) {<a class="code" href="classsprite_object.html#4f1ae47c5993de56ed6e87dae90e3a8f">vx</a> = (s32)(nvx*256); <a class="code" href="classsprite_object.html#f4a9d82ef326b94b3719ea8e6b73664e">vy</a> = (s32)(nvy*256);}
<a name="l00143"></a><a class="code" href="classsprite_object.html#62d731b472eb278da897c94f7b947b7d">00143</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#75bff6b123952663cca745982393f4b5">setSpeed</a>(s32 nvx, s32 nvy) {<a class="code" href="classsprite_object.html#4f1ae47c5993de56ed6e87dae90e3a8f">vx</a> = (nvx&lt;&lt;8); <a class="code" href="classsprite_object.html#f4a9d82ef326b94b3719ea8e6b73664e">vy</a> = (nvy&lt;&lt;8);}
<a name="l00144"></a><a class="code" href="classsprite_object.html#52cc9a40cdb6b5a4b9b4477a83a4c2c3">00144</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#52cc9a40cdb6b5a4b9b4477a83a4c2c3">setvx</a>(s32 nvx) {<a class="code" href="classsprite_object.html#4f1ae47c5993de56ed6e87dae90e3a8f">vx</a> = (nvx&lt;&lt;8);}
<a name="l00145"></a><a class="code" href="classsprite_object.html#ebc06bc41315477022bc7814b713dcb2">00145</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#ebc06bc41315477022bc7814b713dcb2">setvy</a>(s32 nvy) {<a class="code" href="classsprite_object.html#f4a9d82ef326b94b3719ea8e6b73664e">vy</a> = (nvy&lt;&lt;8);}
<a name="l00157"></a><a class="code" href="classsprite_object.html#3178edad8f20e135f259e1d30abb9899">00157</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#3178edad8f20e135f259e1d30abb9899">setRawSpeed</a>(s32 nvx, s32 nvy) {<a class="code" href="classsprite_object.html#4f1ae47c5993de56ed6e87dae90e3a8f">vx</a> = nvx; <a class="code" href="classsprite_object.html#f4a9d82ef326b94b3719ea8e6b73664e">vy</a> = nvy;}
<a name="l00158"></a>00158                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#9986cf3403d93accf99d23f2b73675b0">setFlipped</a>(<span class="keywordtype">bool</span> fh, <span class="keywordtype">bool</span> fv = <span class="keyword">false</span>);
<a name="l00159"></a>00159                 
<a name="l00160"></a>00160                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#bb16c955048d0dab29e4b2dd29139822">setTransparency</a>(u8 transLevel = 15);       <span class="comment">//0=0%, 15=100%</span>
<a name="l00161"></a>00161                 
<a name="l00162"></a>00162                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#34689d0ec43caef2a63ace85ae8588ca">turnAround</a>();
<a name="l00163"></a>00163                 
<a name="l00168"></a><a class="code" href="classsprite_object.html#3194f6e83976878edfc01f24faaf6390">00168</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#3194f6e83976878edfc01f24faaf6390">setFrame</a>(u8 fr)
<a name="l00169"></a>00169                 {
<a name="l00170"></a>00170                         <a class="code" href="classsprite_object.html#3d250c9ad97a81b5dbeef79991eea9e7">frame</a> = fr;
<a name="l00171"></a>00171                         <a class="code" href="classsprite_object.html#332476a1f70f1bb9221936080cd7d3c0">arbitraryAnim</a> = 0;
<a name="l00172"></a>00172                         PA_SetSpriteAnim(<a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">sm</a>-&gt;<a class="code" href="classsprite_manager.html#64676e05909abf6eff7f6edfbe02ed93">screen</a>, <a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">spriteID</a>, <a class="code" href="classsprite_object.html#3d250c9ad97a81b5dbeef79991eea9e7">frame</a>);
<a name="l00173"></a>00173                 }
<a name="l00186"></a><a class="code" href="classsprite_object.html#6cd33ce3dbd0b3100926fda0f9191f13">00186</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#6cd33ce3dbd0b3100926fda0f9191f13">setAnim</a>(u8 f1, u8 f2, u8 s, u8 type = ANIM_LOOP, u8 times = -1)
<a name="l00187"></a>00187                 {
<a name="l00188"></a>00188                         <span class="comment">//regular PAlib animation isn't fast or responsive enough for me, so I'm using arbitraryAnims for everything</span>
<a name="l00189"></a>00189                         vector&lt;u8&gt; frames;
<a name="l00190"></a>00190                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt;= f2-f1; ++i)
<a name="l00191"></a>00191                                 frames.push_back(f1+i);
<a name="l00192"></a>00192                         
<a name="l00193"></a>00193                         <a class="code" href="classsprite_object.html#330b9221eff39b5ca6f868cb84caf07e">setArbitraryAnim</a>(frames, (type == ANIM_LOOP), 60/s);    <span class="comment">//TICKSPERFRAME = 60/ANIMSPEED</span>
<a name="l00194"></a>00194                 }
<a name="l00203"></a><a class="code" href="classsprite_object.html#330b9221eff39b5ca6f868cb84caf07e">00203</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#330b9221eff39b5ca6f868cb84caf07e">setArbitraryAnim</a>(vector&lt;u8&gt; frames, <span class="keywordtype">bool</span> loop, u8 ticksPerFrame = <a class="code" href="classsprite_object.html#fd841d3b82dd380a50c92d4ad61b2d93">TICKSPERFRAME</a>)
<a name="l00204"></a>00204                 {
<a name="l00205"></a>00205                         <a class="code" href="classsprite_object.html#332476a1f70f1bb9221936080cd7d3c0">arbitraryAnim</a> = 1+loop;
<a name="l00206"></a>00206                         <a class="code" href="classsprite_object.html#7b44a1a7b59eb0c0d0d6425a6d4c95f6">arbitrarySpeed</a> = ticksPerFrame;
<a name="l00207"></a>00207                         <a class="code" href="classsprite_object.html#3c7175c1a01af7785b31e432a46bba7e">arbitraryTimeCounter</a> = 0;
<a name="l00208"></a>00208                         <a class="code" href="classsprite_object.html#8e0fff047faac5c16bd26e71f3332d7f">arbitraryFrameCounter</a> = 0;
<a name="l00209"></a>00209                         <a class="code" href="classsprite_object.html#d154edb645ce1103b6e42cd13036660d">arbFrames</a> = frames;
<a name="l00210"></a>00210                         PA_SetSpriteAnim(<a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">sm</a>-&gt;<a class="code" href="classsprite_manager.html#64676e05909abf6eff7f6edfbe02ed93">screen</a>, <a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">spriteID</a>, frames[0]);      <span class="comment">//makes the first frame update happen straight away</span>
<a name="l00211"></a>00211                 }
<a name="l00216"></a><a class="code" href="classsprite_object.html#7ccbc065c90b66378e34aa723df21d77">00216</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#7ccbc065c90b66378e34aa723df21d77">isInAnim</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#332476a1f70f1bb9221936080cd7d3c0">arbitraryAnim</a> != 0);}
<a name="l00217"></a>00217                 
<a name="l00218"></a>00218                 <span class="comment">//totally bitching collision detection</span>
<a name="l00219"></a>00219                 <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#e58bcf114612b0cc8b932421d0511915">isColliding</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a>* other, <span class="keywordtype">bool</span> checkReverse = <span class="keyword">true</span>) <span class="keyword">const</span>;
<a name="l00220"></a>00220                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#4d2f96da503f56d58066bbde7aec7689">inHorizPlaneOf</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a>* other) <span class="keyword">const</span>;
<a name="l00221"></a>00221                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#8fe8184212ca97ee6acd556ba4e00c38">inVertPlaneOf</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a>* other) <span class="keyword">const</span>;
<a name="l00222"></a>00222                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#d8119e064022fe65c846282dd8da2a48">isUnder</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a>* other) <span class="keyword">const</span>;
<a name="l00223"></a>00223                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#3d87d4a36507fef44cc5d27f7d71d69f">isOver</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a>* other) <span class="keyword">const</span>;
<a name="l00224"></a>00224                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#d3ca319884738c38a81f410abefcc6d5">isStandingOn</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a>* other) <span class="keyword">const</span>;
<a name="l00225"></a>00225                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#3e6eddf3bd7d5e921a5a30b1aa93a9b1">isFacing</a>(<span class="keyword">const</span> <a class="code" href="classsprite_object.html">spriteObject</a>* other) <span class="keyword">const</span>;
<a name="l00226"></a>00226                 
<a name="l00240"></a><a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b4">00240</a>                 <span class="keyword">enum</span> <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b4">collisionInfo</a>
<a name="l00241"></a>00241                 {
<a name="l00242"></a>00242                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b478bbbcd01f193c19402403395dc1d4d1">COL_NONE</a> = 0,
<a name="l00243"></a>00243                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b4febd60a193fbf5489a24d47b68953896">COL_BASEABLE</a> = 1,               <span class="comment">//COL_BASEABLE</span>
<a name="l00244"></a>00244                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b4f8fd5f2668ed9ef64fb2da0acafcd4ae">COL_DOWNONLY</a> = 2,
<a name="l00245"></a>00245                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b465a0b5fcdcf02339132dc091c2e26215">COL_DOWNBASEABLE</a> = 3,   <span class="comment">//COL_DOWNONLY &amp; COL_BASEABLE</span>
<a name="l00246"></a>00246                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b449d43257e7a7be04f971f61e9a2d5d3d">COL_SOLID</a> = 4,
<a name="l00247"></a>00247                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b41a407d98319d4f35d8b7ab299146b82b">COL_SOLIDBASEABLE</a> = 5,  <span class="comment">//COL_SOLID &amp; COL_BASEABLE</span>
<a name="l00248"></a>00248                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b466c7c5ecc100a6f04b4cdf5e8467f1a3">COL_CENTERPOINT</a> = 8,            <span class="comment">//collides if middle of sprite is within other sprite's bounds</span>
<a name="l00249"></a>00249                         <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b4d92790e1904235edd2d3f597307cdb9b">COL_PIXELPERFECT</a> = 16           <span class="comment">//exhaustive pixel-precise collision, only for really important stuff that doesnt animate too much (pickups)</span>
<a name="l00250"></a>00250                 };
<a name="l00251"></a><a class="code" href="classsprite_object.html#e3cfe0991e7c87de60849804459cbf7e">00251</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#e3cfe0991e7c87de60849804459cbf7e">setCollision</a>(<a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b4">collisionInfo</a> c) {<a class="code" href="classsprite_object.html#3ae1bdb1e417477fa6aa7849993ff3a2">collision</a> = c;}
<a name="l00257"></a><a class="code" href="classsprite_object.html#62d7901183c4bc95257fcd5365880784">00257</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#62d7901183c4bc95257fcd5365880784">setCheckCollision</a>(<span class="keywordtype">bool</span> ch) {<a class="code" href="classsprite_object.html#cfa1e380339eb546e5b188e088e8b7ec">checkCollision</a> = ch;}
<a name="l00258"></a>00258                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#624130489f898677335b26ea6db35333">isBaseable</a>() <span class="keyword">const</span>;
<a name="l00259"></a>00259                 
<a name="l00266"></a><a class="code" href="classsprite_object.html#9d187ae53169f44a5ba2825ce5363f5e">00266</a>                 <a class="code" href="classsprite_object.html">spriteObject</a>* <a class="code" href="classsprite_object.html#9d187ae53169f44a5ba2825ce5363f5e">getIgnored</a>() {<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#643b09104ce81cf1aa1dd81b86f2ee8a">ignoreUntilUntouched</a>;}
<a name="l00272"></a><a class="code" href="classsprite_object.html#4390ebfeeae95495c8579d1d83a1b83c">00272</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#4390ebfeeae95495c8579d1d83a1b83c">setIgnored</a>(<a class="code" href="classsprite_object.html">spriteObject</a>* o) {<a class="code" href="classsprite_object.html#643b09104ce81cf1aa1dd81b86f2ee8a">ignoreUntilUntouched</a> = o;}
<a name="l00273"></a>00273                 
<a name="l00274"></a>00274                 <span class="comment">//update actual sprite object to which this object relates</span>
<a name="l00275"></a>00275                 <span class="comment">//@pre: palleteID and spriteID are set</span>
<a name="l00276"></a>00276                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#30b86fcea88aef923e414df5d119d9af">updateSprite</a>();
<a name="l00277"></a>00277                 
<a name="l00278"></a>00278                 <span class="comment">//check for collision. Check will start from sm-&gt;gameSprites[indexToCheckFrom],</span>
<a name="l00279"></a>00279                 <span class="comment">//since checks are bidirectional and must only be done once for each object pair.</span>
<a name="l00280"></a>00280                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#fb6a5f573a882b4fb81a551364442e5a">checkCollisions</a>(u8 indexToCheckFrom = 0);
<a name="l00281"></a>00281                 
<a name="l00289"></a><a class="code" href="classsprite_object.html#3b937e1e25e1602414d85eba7fd0f60c">00289</a>                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#3b937e1e25e1602414d85eba7fd0f60c">collidingWith</a>(<a class="code" href="classsprite_object.html">spriteObject</a>* other) {}
<a name="l00290"></a>00290                 
<a name="l00297"></a><a class="code" href="classsprite_object.html#46b80a61903372d4a0c7a3d7c66e63f6">00297</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#46b80a61903372d4a0c7a3d7c66e63f6">pointCollision</a>(s16 <a class="code" href="classsprite_object.html#d32183242a6b4215f28535d42f7b9c3d">x</a>, s16 <a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a>) {<span class="keywordflow">return</span> (x &lt; <a class="code" href="classsprite_object.html#70f331d3537043eb5dc3009efda9bf0f">getRight</a>() &amp;&amp; x &gt; <a class="code" href="classsprite_object.html#89af65012abe03e655deed758f01d716">getLeft</a>() &amp;&amp; y &lt; <a class="code" href="classsprite_object.html#097b5efb4a735e779de09aa9ad44cb32">getBottom</a>() &amp;&amp; y &gt; <a class="code" href="classsprite_object.html#afea305006390da3d8544a2629a20742">getTop</a>());}
<a name="l00298"></a>00298                 
<a name="l00299"></a>00299                 <span class="comment">//getters</span>
<a name="l00300"></a><a class="code" href="classsprite_object.html#7ec5aa5a7c47cc03647a3fefb14e9dc3">00300</a>                 s16 <a class="code" href="classsprite_object.html#7ec5aa5a7c47cc03647a3fefb14e9dc3">getx</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#d32183242a6b4215f28535d42f7b9c3d">x</a>&gt;&gt;8)+<a class="code" href="classsprite_object.html#8a42d1e5ef00fb1968eda24bbc5e05d5">centerx</a>;}
<a name="l00301"></a><a class="code" href="classsprite_object.html#6e21a79795265fbba9cc63ea056e7bb1">00301</a>                 s16 <a class="code" href="classsprite_object.html#6e21a79795265fbba9cc63ea056e7bb1">gety</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a>&gt;&gt;8)+<a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">centery</a>;}
<a name="l00302"></a><a class="code" href="classsprite_object.html#8e898ece332f7fb8b2428bd46cfc86cb">00302</a>                 s32 <a class="code" href="classsprite_object.html#8e898ece332f7fb8b2428bd46cfc86cb">getvx</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#4f1ae47c5993de56ed6e87dae90e3a8f">vx</a>&gt;&gt;8);}
<a name="l00303"></a><a class="code" href="classsprite_object.html#5b38bdd530ef21e0e985def8a79a4ac2">00303</a>                 s32 <a class="code" href="classsprite_object.html#5b38bdd530ef21e0e985def8a79a4ac2">getvy</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#f4a9d82ef326b94b3719ea8e6b73664e">vy</a>&gt;&gt;8);}
<a name="l00304"></a><a class="code" href="classsprite_object.html#a7e3a4fa1a4bedfedc64e6c3ca4646d3">00304</a>                 s32 <a class="code" href="classsprite_object.html#a7e3a4fa1a4bedfedc64e6c3ca4646d3">getRawvx</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#4f1ae47c5993de56ed6e87dae90e3a8f">vx</a>;}
<a name="l00305"></a><a class="code" href="classsprite_object.html#9c19105870a52e398fc7b3a994dc6b64">00305</a>                 s32 <a class="code" href="classsprite_object.html#9c19105870a52e398fc7b3a994dc6b64">getRawvy</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#f4a9d82ef326b94b3719ea8e6b73664e">vy</a>;}
<a name="l00306"></a><a class="code" href="classsprite_object.html#afea305006390da3d8544a2629a20742">00306</a>                 s16 <a class="code" href="classsprite_object.html#afea305006390da3d8544a2629a20742">getTop</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a>&gt;&gt;8)+<a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">centery</a>+<a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#1563a414613f0030971b29299d6b1368">t</a>;}
<a name="l00307"></a><a class="code" href="classsprite_object.html#70f331d3537043eb5dc3009efda9bf0f">00307</a>                 s16 <a class="code" href="classsprite_object.html#70f331d3537043eb5dc3009efda9bf0f">getRight</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#d32183242a6b4215f28535d42f7b9c3d">x</a>&gt;&gt;8)+<a class="code" href="classsprite_object.html#8a42d1e5ef00fb1968eda24bbc5e05d5">centerx</a>+<a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a4e0d680f7176f2dad96a37924f5c064">r</a>;}
<a name="l00308"></a><a class="code" href="classsprite_object.html#097b5efb4a735e779de09aa9ad44cb32">00308</a>                 s16 <a class="code" href="classsprite_object.html#097b5efb4a735e779de09aa9ad44cb32">getBottom</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a>&gt;&gt;8)+<a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">centery</a>+<a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a1dbea5f6f72467e85e5ed5c6c045905">b</a>;}
<a name="l00309"></a><a class="code" href="classsprite_object.html#89af65012abe03e655deed758f01d716">00309</a>                 s16 <a class="code" href="classsprite_object.html#89af65012abe03e655deed758f01d716">getLeft</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#d32183242a6b4215f28535d42f7b9c3d">x</a>&gt;&gt;8)+<a class="code" href="classsprite_object.html#8a42d1e5ef00fb1968eda24bbc5e05d5">centerx</a>+<a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#106a34a1d3ea500cd683ad326f02c5b8">l</a>;}
<a name="l00310"></a>00310                 
<a name="l00311"></a><a class="code" href="classsprite_object.html#ffe4853760cd51ff156487c3d43b6754">00311</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#ffe4853760cd51ff156487c3d43b6754">getFlippedh</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#ef3fdb67169b59c2893e887ed2560040">flippedh</a>;}
<a name="l00312"></a><a class="code" href="classsprite_object.html#323200035731b44a6be7ea21c28eefb6">00312</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#323200035731b44a6be7ea21c28eefb6">getFlippedv</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#f290204b7226bc2f9720161fc094a24b">flippedv</a>;}
<a name="l00313"></a>00313                 
<a name="l00314"></a>00314 <span class="preprocessor">                #ifdef __WITHSOUND</span>
<a name="l00315"></a>00315 <span class="preprocessor"></span>                <span class="comment">//sound stuff</span>
<a name="l00316"></a><a class="code" href="classsprite_object.html#c715f5489bfb7f229334eec5bbe1ae10">00316</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#c715f5489bfb7f229334eec5bbe1ae10">setSoundChannel</a>(s8 channel) {<a class="code" href="classsprite_object.html#f6341f61a964f1f782d4e66a0d398dd0">soundChannel</a> = channel;}
<a name="l00317"></a>00317                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#4c8368e728c4b96fa6823287cb4f3e49">playSound</a>(<span class="keyword">const</span> u8* sound, <span class="keyword">const</span> u32* size, <span class="keywordtype">bool</span> repeat = <span class="keyword">false</span>, u8 vol = 127);
<a name="l00318"></a>00318                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#4c8368e728c4b96fa6823287cb4f3e49">playSound</a>(<a class="code" href="structsprite_manager_1_1sound_data.html">spriteManager::soundData</a>* sound, <span class="keywordtype">bool</span> repeat = <span class="keyword">false</span>, u8 vol = 127);
<a name="l00323"></a><a class="code" href="classsprite_object.html#5459b17a49c6e423038c7178ab4a6dd0">00323</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#5459b17a49c6e423038c7178ab4a6dd0">stopSound</a>()
<a name="l00324"></a>00324                 {
<a name="l00325"></a>00325                         <span class="keywordflow">if</span> (<a class="code" href="classsprite_object.html#efb62a96251d19e97deb07ec54b64ca6">hasSoundLooping</a>()) <a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">sm</a>-&gt;<a class="code" href="classsprite_manager.html#5e2064a349e530cc8ae7dd10c04d58c1">stopSound</a>(<a class="code" href="classsprite_object.html#f6341f61a964f1f782d4e66a0d398dd0">soundChannel</a>);
<a name="l00326"></a>00326                 }
<a name="l00327"></a><a class="code" href="classsprite_object.html#efb62a96251d19e97deb07ec54b64ca6">00327</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#efb62a96251d19e97deb07ec54b64ca6">hasSoundLooping</a>() {<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">sm</a>-&gt;<a class="code" href="classsprite_manager.html#21f51d0cbed48bf32aedd8d93ea4396f">soundLooping</a>(<a class="code" href="classsprite_object.html#f6341f61a964f1f782d4e66a0d398dd0">soundChannel</a>);}
<a name="l00328"></a>00328 <span class="preprocessor">                #endif</span>
<a name="l00329"></a>00329 <span class="preprocessor"></span>                
<a name="l00331"></a><a class="code" href="classsprite_object.html#e92135b5e20dba279247547b04fa11b9">00331</a>                 <span class="keyword">static</span> <span class="keyword">const</span> u32 <a class="code" href="classsprite_object.html#e92135b5e20dba279247547b04fa11b9">SCREENW</a> = 65536;
<a name="l00333"></a><a class="code" href="classsprite_object.html#d3bbf53e294d44050cf64c316525d4bc">00333</a>                 <span class="keyword">static</span> <span class="keyword">const</span> u32 <a class="code" href="classsprite_object.html#d3bbf53e294d44050cf64c316525d4bc">SCREENH</a> = 49152;
<a name="l00335"></a><a class="code" href="classsprite_object.html#fd841d3b82dd380a50c92d4ad61b2d93">00335</a>                 <span class="keyword">static</span> <span class="keyword">const</span> u8 <a class="code" href="classsprite_object.html#fd841d3b82dd380a50c92d4ad61b2d93">TICKSPERFRAME</a> = 6;
<a name="l00337"></a><a class="code" href="classsprite_object.html#dfb19de0bad95fae2605292e90651ba4">00337</a>                 <span class="keyword">static</span> <span class="keyword">const</span> u8 <a class="code" href="classsprite_object.html#dfb19de0bad95fae2605292e90651ba4">ANIMSPEED</a> = 10;
<a name="l00338"></a>00338                 
<a name="l00339"></a>00339                 <span class="comment">//heriachies</span>
<a name="l00340"></a>00340                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#dacf67300dd0b7d4e3dce1ad2e9bbce5">setParent</a>(<a class="code" href="classsprite_object.html">spriteObject</a>* other);    <span class="comment">//only ever called by parent's addChild()</span>
<a name="l00341"></a>00341                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#388c7a06fe42d6844be47023156d17be">addChild</a>(<a class="code" href="classsprite_object.html">spriteObject</a>* other);             <span class="comment">//add another spriteObject to me</span>
<a name="l00342"></a>00342                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#b9a4353f4fd14c7fa5b9aaa0348d29d7">removeChild</a>(<span class="comment">/*spriteObject* other*/</span>);      <span class="comment">//unparent child spriteObject</span>
<a name="l00343"></a>00343                 
<a name="l00349"></a><a class="code" href="classsprite_object.html#e4208f1014271e68c6f39e32ed511261">00349</a>                 <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#e4208f1014271e68c6f39e32ed511261">makeStatic</a>() {<a class="code" href="classsprite_object.html#30b86fcea88aef923e414df5d119d9af">updateSprite</a>(); <a class="code" href="classsprite_object.html#6cc8394c53dd60ec8e5286d27ac2183a">staticSprite</a> = <span class="keyword">true</span>;}
<a name="l00350"></a>00350                 
<a name="l00357"></a><a class="code" href="classsprite_object.html#468cff97bf5fef805bb469ba48fbc353">00357</a>                 <a class="code" href="classsprite_object.html">spriteObject</a>* <a class="code" href="classsprite_object.html#468cff97bf5fef805bb469ba48fbc353">getAttachment</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#0c60e2684cecb08156e796fed4abc4cd">attachment</a>;}
<a name="l00366"></a><a class="code" href="classsprite_object.html#f635021727283255cb4c75d57331066a">00366</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#f635021727283255cb4c75d57331066a">setAttachment</a>(<a class="code" href="classsprite_object.html">spriteObject</a>* o) {<a class="code" href="classsprite_object.html#0c60e2684cecb08156e796fed4abc4cd">attachment</a> = o; o-&gt;<a class="code" href="classsprite_object.html#c69ad4a82f52192ebb492946088199d3">isAttachment</a> = <span class="keyword">true</span>;}
<a name="l00367"></a>00367                 
<a name="l00377"></a><a class="code" href="classsprite_object.html#c7d23a78859fcda651b29c39bcd2ff02">00377</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#c7d23a78859fcda651b29c39bcd2ff02">setRotSet</a>(u8 rs) {<a class="code" href="classsprite_object.html#b5e73e1a45286bf90ebadc81fc4d32d4">rotSetID</a> = rs;}
<a name="l00381"></a><a class="code" href="classsprite_object.html#85ceaaa2c7f6dd80c119dcbb77389ab6">00381</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#85ceaaa2c7f6dd80c119dcbb77389ab6">enableRotation</a>() {<span class="keywordflow">if</span> (<a class="code" href="classsprite_object.html#b5e73e1a45286bf90ebadc81fc4d32d4">rotSetID</a> != -1) {PA_SetSpriteRotEnable(<a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">sm</a>-&gt;<a class="code" href="classsprite_manager.html#64676e05909abf6eff7f6edfbe02ed93">screen</a>, <a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">spriteID</a>, <a class="code" href="classsprite_object.html#b5e73e1a45286bf90ebadc81fc4d32d4">rotSetID</a>); <a class="code" href="classsprite_object.html#ea71dc15fac465788a27eb5f0e407b6d">bRotating</a>=<span class="keyword">true</span>;} <span class="keywordflow">return</span> (<a class="code" href="classsprite_object.html#b5e73e1a45286bf90ebadc81fc4d32d4">rotSetID</a> != -1);}
<a name="l00385"></a><a class="code" href="classsprite_object.html#c703e7fd1d452e9690a8f9debf3b341b">00385</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#c703e7fd1d452e9690a8f9debf3b341b">disableRotation</a>() {<a class="code" href="classsprite_object.html#ea71dc15fac465788a27eb5f0e407b6d">bRotating</a>=<span class="keyword">false</span>; PA_SetSpriteRotDisable(<a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">sm</a>-&gt;<a class="code" href="classsprite_manager.html#64676e05909abf6eff7f6edfbe02ed93">screen</a>, <a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">spriteID</a>);}
<a name="l00389"></a><a class="code" href="classsprite_object.html#ba51875591a4e117387eb633de913cd5">00389</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#ba51875591a4e117387eb633de913cd5">setRotation</a>(u16 newRot) {<span class="keywordflow">if</span> (<a class="code" href="classsprite_object.html#b5e73e1a45286bf90ebadc81fc4d32d4">rotSetID</a> == -1 || !<a class="code" href="classsprite_object.html#ea71dc15fac465788a27eb5f0e407b6d">bRotating</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>; <a class="code" href="classsprite_object.html#ce33841bee3161423ef4240ed189bb59">rotAngle</a> = newRot; <a class="code" href="classsprite_object.html#ce33841bee3161423ef4240ed189bb59">rotAngle</a> &amp;= 511; <span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00390"></a>00390                 
<a name="l00392"></a><a class="code" href="classsprite_object.html#77bb45b9a8da08c8450517991189a8ab">00392</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#77bb45b9a8da08c8450517991189a8ab">bNeedsGFXCleanup</a>;
<a name="l00398"></a><a class="code" href="classsprite_object.html#a0148bc6ed77ecec3054fba6b84edef4">00398</a>                 s32 <a class="code" href="classsprite_object.html#a0148bc6ed77ecec3054fba6b84edef4">getGFXid</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#7cc22253ab103ba351290e1f48a8cd44">gfxID</a>;}
<a name="l00399"></a>00399                 
<a name="l00408"></a><a class="code" href="classsprite_object.html#338b36b713b6ed306be6bc8c0360af60">00408</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#338b36b713b6ed306be6bc8c0360af60">setLifetime</a>(u16 numSecs) {<a class="code" href="classsprite_object.html#2013e69ace8f9449a2aca34718aee68e">framesToLive</a> = numSecs*<a class="code" href="classsprite_object.html#dfb19de0bad95fae2605292e90651ba4">ANIMSPEED</a>*<a class="code" href="classsprite_object.html#fd841d3b82dd380a50c92d4ad61b2d93">TICKSPERFRAME</a>;}
<a name="l00409"></a><a class="code" href="classsprite_object.html#b701bcfdc57912a2d2365651c3fe8de6">00409</a>                 s16 <a class="code" href="classsprite_object.html#b701bcfdc57912a2d2365651c3fe8de6">getLifetime</a>() {<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#2013e69ace8f9449a2aca34718aee68e">framesToLive</a>;}
<a name="l00410"></a><a class="code" href="classsprite_object.html#8686fc8612611c15a1b07e2e8bacc665">00410</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#8686fc8612611c15a1b07e2e8bacc665">disableLifetime</a>() {<a class="code" href="classsprite_object.html#2013e69ace8f9449a2aca34718aee68e">framesToLive</a> = -1;}
<a name="l00411"></a>00411                 
<a name="l00417"></a><a class="code" href="classsprite_object.html#2eefb92201a19f178374faec377c3d7d">00417</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#2eefb92201a19f178374faec377c3d7d">markedForDeletion</a>() {<span class="keywordflow">return</span> <a class="code" href="classsprite_object.html#2013e69ace8f9449a2aca34718aee68e">framesToLive</a> == 0;}
<a name="l00418"></a>00418                 
<a name="l00422"></a><a class="code" href="classsprite_object.html#65673241d90a443a410a201004396f43">00422</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#65673241d90a443a410a201004396f43">destroy</a>()
<a name="l00423"></a>00423                 {
<a name="l00424"></a>00424                         <a class="code" href="classsprite_object.html#2013e69ace8f9449a2aca34718aee68e">framesToLive</a> = 0;
<a name="l00425"></a>00425 <span class="preprocessor">                        #ifdef __MDDEBUG</span>
<a name="l00426"></a>00426 <span class="preprocessor"></span>                        <span class="keywordtype">char</span> buffer[255];
<a name="l00427"></a>00427                         sprintf(buffer, <span class="stringliteral">"flagged for deletion (gfx #%d, sprite #%d, pallete #%d)"</span>, <a class="code" href="classsprite_object.html#7cc22253ab103ba351290e1f48a8cd44">gfxID</a>, <a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">spriteID</a>, <a class="code" href="classsprite_object.html#9c6b610f1930f17cac27c9cddb358ee7">palleteID</a>);
<a name="l00428"></a>00428                         macros::debugMessage(className, buffer);
<a name="l00429"></a>00429 <span class="preprocessor">                        #endif</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span>                }
<a name="l00431"></a>00431         <span class="keyword">protected</span>:
<a name="l00432"></a><a class="code" href="classsprite_object.html#2affc5517130f041436591cd266dc7ce">00432</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#2affc5517130f041436591cd266dc7ce">swapHBounds</a>() {u8 btemp = <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a4e0d680f7176f2dad96a37924f5c064">r</a>; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a4e0d680f7176f2dad96a37924f5c064">r</a> = <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#106a34a1d3ea500cd683ad326f02c5b8">l</a>*-1; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#106a34a1d3ea500cd683ad326f02c5b8">l</a> = btemp*-1;}
<a name="l00433"></a><a class="code" href="classsprite_object.html#d8ede14db035f952bfce91b77019a157">00433</a>                 <span class="keywordtype">void</span> <a class="code" href="classsprite_object.html#d8ede14db035f952bfce91b77019a157">swapVBounds</a>() {u8 btemp = <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#1563a414613f0030971b29299d6b1368">t</a>; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#1563a414613f0030971b29299d6b1368">t</a> = <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a1dbea5f6f72467e85e5ed5c6c045905">b</a>*-1; <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>.<a class="code" href="structsprite_object_1_1boundingbox.html#a1dbea5f6f72467e85e5ed5c6c045905">b</a> = btemp*-1;}
<a name="l00434"></a>00434                         <span class="comment">//this could fuck stuff up if I happen to make a btemp variable near this function call :S</span>
<a name="l00435"></a>00435                 
<a name="l00437"></a><a class="code" href="classsprite_object.html#0c60e2684cecb08156e796fed4abc4cd">00437</a>                 <a class="code" href="classsprite_object.html">spriteObject</a>* <a class="code" href="classsprite_object.html#0c60e2684cecb08156e796fed4abc4cd">attachment</a>;
<a name="l00438"></a><a class="code" href="classsprite_object.html#c69ad4a82f52192ebb492946088199d3">00438</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#c69ad4a82f52192ebb492946088199d3">isAttachment</a>;                      <span class="comment">//TODO! if unattached, this should be set back to false..</span>
<a name="l00439"></a>00439                 
<a name="l00441"></a><a class="code" href="classsprite_object.html#6cc8394c53dd60ec8e5286d27ac2183a">00441</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#6cc8394c53dd60ec8e5286d27ac2183a">staticSprite</a>;
<a name="l00442"></a>00442                 
<a name="l00444"></a><a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">00444</a>                 <a class="code" href="classsprite_manager.html">spriteManager</a>* <a class="code" href="classsprite_object.html#91226a9f4208c1962119821fa8ed3b94">sm</a>;
<a name="l00445"></a>00445                 
<a name="l00446"></a>00446                 <span class="comment">//very simple sprite hierachy</span>
<a name="l00447"></a><a class="code" href="classsprite_object.html#1ebc3125aa8da5949e3119025f6fbc2f">00447</a>                 <a class="code" href="classsprite_object.html">spriteObject</a>* <a class="code" href="classsprite_object.html#1ebc3125aa8da5949e3119025f6fbc2f">parentSprite</a>;
<a name="l00448"></a>00448                 <span class="comment">//vector&lt;spriteObject*&gt; childSprites;</span>
<a name="l00449"></a><a class="code" href="classsprite_object.html#7dcea86f2e14b1bbe8742a9a8d1211ea">00449</a>                 <a class="code" href="classsprite_object.html">spriteObject</a>* <a class="code" href="classsprite_object.html#7dcea86f2e14b1bbe8742a9a8d1211ea">childSprite</a>;
<a name="l00450"></a>00450                 
<a name="l00452"></a><a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">00452</a>                 s8 <a class="code" href="classsprite_object.html#9ecd48cc3420596c9a7a19cefcc8ee6e">spriteID</a>;
<a name="l00454"></a><a class="code" href="classsprite_object.html#9c6b610f1930f17cac27c9cddb358ee7">00454</a>                 s8 <a class="code" href="classsprite_object.html#9c6b610f1930f17cac27c9cddb358ee7">palleteID</a>;
<a name="l00456"></a><a class="code" href="classsprite_object.html#7cc22253ab103ba351290e1f48a8cd44">00456</a>                 s32 <a class="code" href="classsprite_object.html#7cc22253ab103ba351290e1f48a8cd44">gfxID</a>;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458 <span class="preprocessor">                #ifdef __WITHSOUND</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span>                <span class="comment">//channel to play all my sounds in (1 at a time per sprite!)</span>
<a name="l00460"></a><a class="code" href="classsprite_object.html#f6341f61a964f1f782d4e66a0d398dd0">00460</a>                 s8 <a class="code" href="classsprite_object.html#f6341f61a964f1f782d4e66a0d398dd0">soundChannel</a>;
<a name="l00461"></a>00461 <span class="preprocessor">                #endif</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span>                
<a name="l00463"></a>00463                 <span class="comment">//position and velocity variables, in fixed point format</span>
<a name="l00464"></a><a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">00464</a>                 s32 <a class="code" href="classsprite_object.html#d32183242a6b4215f28535d42f7b9c3d">x</a>, <a class="code" href="classsprite_object.html#51a72aa5cf4648b3d142431b46c46247">y</a>, <a class="code" href="classsprite_object.html#4f1ae47c5993de56ed6e87dae90e3a8f">vx</a>, <a class="code" href="classsprite_object.html#f4a9d82ef326b94b3719ea8e6b73664e">vy</a>;
<a name="l00465"></a><a class="code" href="classsprite_object.html#8fea6697731e85a4bead61a51369eaaa">00465</a>                 s32 <a class="code" href="classsprite_object.html#5b34c8d5b28dd826009b1c32252af97e">oldx</a>, <a class="code" href="classsprite_object.html#8fea6697731e85a4bead61a51369eaaa">oldy</a>;
<a name="l00466"></a><a class="code" href="classsprite_object.html#de57316618f94deb5ac15dbb1c035399">00466</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#ef3fdb67169b59c2893e887ed2560040">flippedh</a>, <a class="code" href="classsprite_object.html#f290204b7226bc2f9720161fc094a24b">flippedv</a>, <a class="code" href="classsprite_object.html#4f65a615dbbfe356a6dd80d646df11e3">oldFliph</a>, <a class="code" href="classsprite_object.html#de57316618f94deb5ac15dbb1c035399">oldFlipv</a>;
<a name="l00467"></a><a class="code" href="classsprite_object.html#ad650a239c91615dbd0b4eee02be5ac5">00467</a>                 u8 <a class="code" href="classsprite_object.html#ad650a239c91615dbd0b4eee02be5ac5">layer</a>;
<a name="l00468"></a><a class="code" href="classsprite_object.html#f00db6e3f733f0cf6af5969fbcb81626">00468</a>                 u8 <a class="code" href="classsprite_object.html#3d250c9ad97a81b5dbeef79991eea9e7">frame</a>, <a class="code" href="classsprite_object.html#f00db6e3f733f0cf6af5969fbcb81626">oldFrame</a>;
<a name="l00469"></a>00469                 
<a name="l00471"></a><a class="code" href="classsprite_object.html#332476a1f70f1bb9221936080cd7d3c0">00471</a>                 u8 <a class="code" href="classsprite_object.html#332476a1f70f1bb9221936080cd7d3c0">arbitraryAnim</a>;
<a name="l00473"></a><a class="code" href="classsprite_object.html#7b44a1a7b59eb0c0d0d6425a6d4c95f6">00473</a>                 u8 <a class="code" href="classsprite_object.html#7b44a1a7b59eb0c0d0d6425a6d4c95f6">arbitrarySpeed</a>;
<a name="l00474"></a><a class="code" href="classsprite_object.html#8e0fff047faac5c16bd26e71f3332d7f">00474</a>                 u8 <a class="code" href="classsprite_object.html#8e0fff047faac5c16bd26e71f3332d7f">arbitraryFrameCounter</a>;
<a name="l00475"></a><a class="code" href="classsprite_object.html#3c7175c1a01af7785b31e432a46bba7e">00475</a>                 u8 <a class="code" href="classsprite_object.html#3c7175c1a01af7785b31e432a46bba7e">arbitraryTimeCounter</a>;
<a name="l00477"></a><a class="code" href="classsprite_object.html#d154edb645ce1103b6e42cd13036660d">00477</a>                 vector&lt;u8&gt; <a class="code" href="classsprite_object.html#d154edb645ce1103b6e42cd13036660d">arbFrames</a>;
<a name="l00478"></a>00478                 
<a name="l00480"></a><a class="code" href="structsprite_object_1_1boundingbox.html">00480</a>                 <span class="keyword">struct </span><a class="code" href="structsprite_object_1_1boundingbox.html">boundingbox</a>
<a name="l00481"></a>00481                 {
<a name="l00482"></a><a class="code" href="structsprite_object_1_1boundingbox.html#1563a414613f0030971b29299d6b1368">00482</a>                         s8 <a class="code" href="structsprite_object_1_1boundingbox.html#1563a414613f0030971b29299d6b1368">t</a>, <a class="code" href="structsprite_object_1_1boundingbox.html#a4e0d680f7176f2dad96a37924f5c064">r</a>, <a class="code" href="structsprite_object_1_1boundingbox.html#a1dbea5f6f72467e85e5ed5c6c045905">b</a>, <a class="code" href="structsprite_object_1_1boundingbox.html#106a34a1d3ea500cd683ad326f02c5b8">l</a>;
<a name="l00483"></a>00483                 };
<a name="l00484"></a><a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">00484</a>                 <a class="code" href="structsprite_object_1_1boundingbox.html">boundingbox</a> <a class="code" href="classsprite_object.html#99e9004030fdba03044660376be861ed">bounds</a>;
<a name="l00485"></a><a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">00485</a>                 u8 <a class="code" href="classsprite_object.html#8a42d1e5ef00fb1968eda24bbc5e05d5">centerx</a>, <a class="code" href="classsprite_object.html#370dd17954cde6b12ec0469f03827d6f">centery</a>;    <span class="comment">//offsets to sprite center (half width)</span>
<a name="l00486"></a>00486                 
<a name="l00487"></a><a class="code" href="classsprite_object.html#3ae1bdb1e417477fa6aa7849993ff3a2">00487</a>                 <a class="code" href="classsprite_object.html#6b50b57ad715e840166471279ec510b4">collisionInfo</a> <a class="code" href="classsprite_object.html#3ae1bdb1e417477fa6aa7849993ff3a2">collision</a>;
<a name="l00488"></a><a class="code" href="classsprite_object.html#cfa1e380339eb546e5b188e088e8b7ec">00488</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#cfa1e380339eb546e5b188e088e8b7ec">checkCollision</a>;            <span class="comment">//only active objects (players, pickups etc) should check collision</span>
<a name="l00490"></a><a class="code" href="classsprite_object.html#643b09104ce81cf1aa1dd81b86f2ee8a">00490</a> <span class="comment"></span>                <a class="code" href="classsprite_object.html">spriteObject</a>* <a class="code" href="classsprite_object.html#643b09104ce81cf1aa1dd81b86f2ee8a">ignoreUntilUntouched</a>;
<a name="l00491"></a>00491                 
<a name="l00492"></a>00492                 <span class="comment">//rotation variables</span>
<a name="l00493"></a><a class="code" href="classsprite_object.html#b5e73e1a45286bf90ebadc81fc4d32d4">00493</a>                 s8 <a class="code" href="classsprite_object.html#b5e73e1a45286bf90ebadc81fc4d32d4">rotSetID</a>;
<a name="l00494"></a><a class="code" href="classsprite_object.html#ce33841bee3161423ef4240ed189bb59">00494</a>                 u16 <a class="code" href="classsprite_object.html#ce33841bee3161423ef4240ed189bb59">rotAngle</a>;
<a name="l00495"></a><a class="code" href="classsprite_object.html#ea71dc15fac465788a27eb5f0e407b6d">00495</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#ea71dc15fac465788a27eb5f0e407b6d">bRotating</a>;
<a name="l00496"></a>00496                 
<a name="l00497"></a>00497 <span class="preprocessor">                #ifdef __MDDEBUG</span>
<a name="l00498"></a>00498 <span class="preprocessor"></span>                string className;
<a name="l00499"></a>00499 <span class="preprocessor">                #endif</span>
<a name="l00500"></a>00500 <span class="preprocessor"></span>                
<a name="l00501"></a>00501                 <span class="comment">//if any of the following are set, the relevant PAlib() updating functions are called</span>
<a name="l00502"></a><a class="code" href="classsprite_object.html#7ede5b5fe4d3fbe94be0ed62727951f2">00502</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#7ede5b5fe4d3fbe94be0ed62727951f2">UPDATEDlayer</a>;
<a name="l00503"></a><a class="code" href="classsprite_object.html#a66c224f6865cffffef4117e769808d8">00503</a>                 <span class="keywordtype">bool</span> <a class="code" href="classsprite_object.html#a66c224f6865cffffef4117e769808d8">UPDATEDflip</a>;
<a name="l00504"></a>00504                 
<a name="l00505"></a>00505                 <span class="comment">//if this reaches 0, destroy self</span>
<a name="l00506"></a><a class="code" href="classsprite_object.html#2013e69ace8f9449a2aca34718aee68e">00506</a>                 s16 <a class="code" href="classsprite_object.html#2013e69ace8f9449a2aca34718aee68e">framesToLive</a>;
<a name="l00507"></a>00507 };
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Mar 13 23:27:53 2007 for MDuel DS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
