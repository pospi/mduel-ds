<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MDuel DS: Marshmallow Duel DS</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>Marshmallow Duel DS</h1>
<p>
<h3 align="center">2.0 </h3><h2><a class="anchor" name="secIntro">
About</a></h2>
Welcome to the Marshmallow Duel DS source code. MDuel DS is a free game built for the Nintendo DS console, using <a href="http://www.devkitpro.org/">DevKitPro</a> and <a href="http://www.palib.info">PALib</a>.<p>
It is a sequel to / extension of <a href="http://www.marshmallowduel.com">Marshmallow Duel</a>, a game originally created by Duncan and Roger Gill in 1996 using TurboC and some archaic PCX libraries. Ah, those were the days.<p>
To read more about MDuel DS and to download the latest official version, please go to <a href="http://mduel2k5.spadgos.com/mduel96/mduelDSdownload.php">http://mduel2k5.spadgos.com/mduel96/mduelDSdownload.php</a>.<h2><a class="anchor" name="secCopy">
Legal</a></h2>
MDuel DS was created entirely by pospi, just for a bit of fun really. You can view more of his projects or contact him by going to <a href="http://pospi.spadgos.com/">http://pospi.spadgos.com</a>.<p>
The source code is released under the GPL, which means that it is free for anyone to use or modify so long as you respect a few simple guidelines. Basically, you must provide the full source code whenever you release something based on this code, and you must document all your changes to the original source code with the appropriate @author and @date tags. A copy of this license is included in <a href="../gpl.txt">gpl.txt</a>.<br>
 License summary follows:<p>
<pre>Marshmallow Duel DS v2
Copyright &copy; 2007 Sam Pospischil <a href="http://pospi.spadgos.com">http://pospi.spadgos.com</a></pre><p>
<pre>This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.</pre><p>
<pre>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.</pre><p>
<pre>You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</pre><h2><a class="anchor" name="secCode">
The Code</a></h2>
The MDuel DS source code is generated with <a href="http://www.doxygen.org/">doxyGen</a> and <a href="http://www.graphviz.org/">GraphViz</a>, which should make it very easy to follow, so if you plan on editing it please stick to some quality documentation. Methods, classes etc are displayed with their comment headers and are hyperlinked to all locations in the source code that reference them. To view the documentation for functions linked to a member, click on the name of the function in the member's call graph.<p>
For testing debug builds, I recommend <a href="http://nocash.emubase.de/gba.htm">no$gba</a> for quick testing on Windows and a DS flashcart like the <a href="http://www.m3adapter.com/">M3 adapter</a> for running the game on hardware. When compiled with the compiler directive __MDDEBUG (see <a class="el" href="macros_8h.html">macros.h</a>), the game attempts to output debugging info to a log file if the flashcart supports FAT drivers. If this is unavailable, the information is printed to the bottom screen instead.<p>
The game engine is fairly simplistic and features only a handful of base classes. These are:<ul>
<li><a class="el" href="classsprite_manager.html">spriteManager</a>, a screen and sprite memory management class</li><li><a class="el" href="classsprite_object.html">spriteObject</a>, a single sprite on the screen and all its related information</li><li><a class="el" href="class_weapon.html">Weapon</a>, an inventory class for <a class="el" href="class_player.html">Player</a>s to utilise.</li></ul>
<p>
All objects in the game are derived from these and implement game logic at higher levels. Note that most specific <a class="el" href="class_weapon.html">Weapon</a> subclasses are not documented fully as a good understanding of their behaviour can be obtained via analysis of the <a class="el" href="class_weapon.html">Weapon</a> class itself.<p>
There are 18 weapons in this version, and please note that the parachut is not a typo and should definitely never have its spelling corrected.<h3><a class="anchor" name="secBugs">
Current Bugs</a></h3>
<ul>
<li>Stability leaves something to be desired</li><li>Boots occaisonally appear behind the player</li><li>Walk animation sometimes doesn't play in a DS emulator or when intensive calculations are taking place</li></ul>
<h3><a class="anchor" name="secWish">
Wishlist</a></h3>
Here are some things I, personally, would like to see happen one day:<ul>
<li>Wifi multiplayer</li><li>AI opponents</li><li>Shift the sprite routines to a 3D sprite system (newer versions of PALib support this)<ul>
<li>Would allow up to 1024 sprites, instead of 128</li><li>Which means there could be larger, scrolling maps...</li><li>and more than two players...</li><li>and custom built levels, level editors, tilesets etc. The possibilities are endless.</li></ul>
</li></ul>
<h2><a class="anchor" name="secInstall">
Compilation</a></h2>
<h3><a class="anchor" name="secIns1">
Required libraries</a></h3>
If you plan on compiling MDuel DS, you're going to need to install some libraries first:<ul>
<li><a href="http://downloads.sourceforge.net/devkitpro/devkitProUpdater-1.3.5.exe">DevKitPro v1.3.5</a> (newer versions seem to have issues with timers and SRAM saving)</li><li><a href="http://palib.info/forum/modules/PDdownloads/visit.php?cid=2&lid=2">PALib 060917</a> (again, newer versions seem bad)</li></ul>
<p>
With DevKitPro, only the core files and ARM libraries are necessary. Other stuff is for development on different platforms.<p>
Newer versions of both may well work for you with little or no fiddling, so if you're feeling adventurous then by all means knock yourself out. After all, it can only make the game more stable. If you do upgrade, the weapon time statistics and SRAM saving should be checked on emulators and DS hardware as these were the problematic areas with more recent libraries.<h3><a class="anchor" name="secIns1b">
PALib library edits</a></h3>
If you are using PALib 060917 then an additional change is required to its internals to allow for resetting screen VRAM independently. If you decided to try your luck with an upgrade, then this is not necessary. To find the required changes, open up the 'libraryEdits.cpp' file included under the 'notsource' directory. After making the changes listed, simply recompile PALib by navigating to DevKitPro/PALib and running build.bat.<h3><a class="anchor" name="secIns2">
Choose your compiler</a></h3>
So all that stuff is installed, and you're ready to compile. But how?<p>
The project is set up to be compiled under Visual Studio 2005, but if you want to compile 'normally' under GCC because you hate Microsoft, then that's perfectly doable. Here are the steps to follow:<ul>
<li>Copy the PALib template (should be included in your PALib download) to a new folder inside DevKitPro. Let's call it 'MDuelGCC' for the purposes of these instructions. It really doesn't matter what you call it though.</li><li>Copy everything inside the MDuel 'source' and 'data' folders to the corresponding folders in MDuelGCC</li><li>Copy the supplied 'Makefile-gcc' into MDuelGCC and rename it to plain old 'Makefile'. You might have to play around with this a little, especially if you're using a different version of DevKitPro / PALib. I suggest you compare its contents with those of the PALib template makefile.</li><li>That's it! Run build.bat and everything should _hopefully_ compile. If not, consult a <a href="http://www.palib.info/forum/">forum</a> someplace ;)</li></ul>
<p>
If you have a copy of Microsoft Visual Studio 2005 Pro then you're in luck, because that's what I used. I don't know if VS2005 Express will work or not but you'll probably get lucky. Note that to make VS2005 recognise DevKitPro properly, you'll need to add a DKP_PATH environment variable with the path to the main DevKitPro folder. You should be able to open up the project file and compile straight away after that last step.<p>
Just for reference, here are the environment variables you need to have set in either case. They should be set automatically by the DKP and PALib installers, but just in case...<ul>
<li>PAPATH c:/devkitPro/PAlib/</li><li>DEVKITARM /c/devkitPro/devkitARM</li><li>DEVKITPRO /c/devkitPro</li><li>PATH c:\devkitPro\msys\bin</li><li>DKP_PATH c:\DevKitPro </li></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Mar 13 23:27:52 2007 for MDuel DS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
